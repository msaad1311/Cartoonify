<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.js"></script>
    <py-env>
        - matplotlib
        - numpy
        - opencv-python
        - imageio
        - paths:
            - chair_man.jpg
      </py-env>
    
    
      <py-config>
        - autoclose_loader: true
        - runtimes:
          -
            src: "https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.js"
            name: pyodide-0.20
            lang: python
            
      </py-config>
</head>
<body>
    <div id="image"></div>

    <py-script output="image">
    from pyodide.http import pyfetch
    from js import document
    import asyncio
    from io import BytesIO
    import matplotlib.pyplot as plt
    import imageio.v3 as iio
    import io, base64
    import cv2

    img = cv2.imread("./chair_man.jpg")
    gray_image = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    row, col = 1, 2
    fig, axs = plt.subplots(row, col, figsize=(15, 10))
    fig.tight_layout()
    
    axs[0].imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))
    axs[0].set_title('Original')

    axs[1].imshow(cv2.cvtColor(gray_image, cv2.COLOR_BGR2RGB))
    axs[1].set_title('Grayscale')

    fig.show()

    <!-- buf = io.BytesIO()
    plt.savefig(buf, format='png')
    buf.seek(0)
    
    img_str = 'data:image/png;base64,' + base64.b64encode(buf.read()).decode('UTF-8')
    
    pfig = document.getElementById("pyplotfigure")
    
    pfig.setAttribute("src",img_str) -->
    
    <!-- document.querySelector("img").setAttribute("src", img_str) -->
    </py-script>

    
</body>
</html>


